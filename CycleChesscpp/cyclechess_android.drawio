<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:136.0) Gecko/20100101 Firefox/136.0" version="26.1.3">
  <diagram name="Страница — 1" id="whJ2fWiHA6s2N7elw8CB">
    <mxGraphModel dx="2263" dy="2074" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-1" value="GameScreen" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="3100" y="50" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-2" value="MainScreen" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-60" y="50" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-3" value="&lt;div&gt;ProfileScreen&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1050" y="50" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-4" value="FindOpponentsScreen" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2068" y="50" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-6" target="4JHQIKAfzCPAmPfKTR0K-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-9" value="Достали успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-8">
          <mxGeometry x="-0.1714" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-6" value="Достаем jwt токен из shared pref" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-60" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-7" target="4JHQIKAfzCPAmPfKTR0K-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-12" value="Валидация прошла успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-11">
          <mxGeometry x="-0.2524" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-7" target="4JHQIKAfzCPAmPfKTR0K-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-18" value="Валидация прошла НЕ успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-17">
          <mxGeometry x="-0.3031" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-7" value="Отправляем токен на сервер для валидации" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-60" y="250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-10" target="4JHQIKAfzCPAmPfKTR0K-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-15" value="Независимо от того достали или нет" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-14">
          <mxGeometry x="-0.1952" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-10" target="4JHQIKAfzCPAmPfKTR0K-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-21" value="Достали НЕ пустой username" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-20">
          <mxGeometry x="-0.3612" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-10" target="4JHQIKAfzCPAmPfKTR0K-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-24" value="Достали пустой username" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-23">
          <mxGeometry x="-0.4183" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-10" value="&lt;div&gt;Достаем username из shared pref&lt;/div&gt;&lt;div&gt;(оно там есть?)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-320" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-13" value="Показываем кнопку &quot;Мультиплеер&quot;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-320" y="470" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-16" value="&lt;div&gt;Скрываем кнопку &quot;Мультиплеер&quot; и записываем в username &quot;Аноним&quot;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="340" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-19" value="Показываем его и кнопку &quot;Мультиплеер&quot; (зачем кнопку показывать?)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-600" y="455" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-22" value="Показываем вместо username &quot;Аноним&quot; и скрываем кнопку &quot;Мультиплеер&quot; (точно ли это надо?)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-60" y="455" width="150" height="90" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-25" value="&lt;div align=&quot;left&quot;&gt;В идеале что хотим&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1. Если есть валидный jwt токен (в этом случае должен быть и username, возможно его стоит возвращать в ответе сервера на запрос валидации токена), то показать кнопку &quot;Мультиплеер&quot; и отрисовать username пользователя&lt;/div&gt;&lt;div&gt;2. Если токена нет, или он не валидный, то не показывать кнопку &quot;Мультиплеер&quot; и писать в качестве username &quot;Аноним&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Возможно норм план это держать переменную username, в которой по дефолту &quot;Аноним&quot; и возвращать в месте с ответом с сервера username и потом писать просто переменную username&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-590" y="30" width="510" height="270" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-29" target="4JHQIKAfzCPAmPfKTR0K-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-28" value="Достали успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-27">
          <mxGeometry x="-0.1714" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-29" value="Достаем jwt токен из shared pref" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-30" target="4JHQIKAfzCPAmPfKTR0K-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-34" value="Валидация прошла успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-33">
          <mxGeometry x="0.1818" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-30" target="4JHQIKAfzCPAmPfKTR0K-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-43" value="Валидация прошла НЕ успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-41">
          <mxGeometry x="-0.4087" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-30" value="Отправляем токен на сервер для валидации" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-32" target="4JHQIKAfzCPAmPfKTR0K-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-32" value="Достаем username из shared pref и показываем ProfileUI" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="300" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-35" value="&lt;div align=&quot;left&quot;&gt;&amp;nbsp;ProfileUI - textview с username, кнопка &quot;Выйти из профиля&quot;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div align=&quot;left&quot;&gt;RegisterAuthorizationUI - edittext для логина, edittext для пароля, кнопка &quot;Зарегистрироваться&quot;, кнопка &quot;Войти&quot;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="970" y="330" width="260" height="110" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-36" value="Безкомпромисно показываем то, что достали из sharedpref в textview для username (точно ли это ок? может надо проверку всандалить. Если возвращать username с сервера при валидации, то и эта проблема решится)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="681.25" y="420" width="257.5" height="80" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-40" value="Показываем RegisterAuthorizationUI " style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1340" y="300" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-44" target="4JHQIKAfzCPAmPfKTR0K-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-47" value="Успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-46">
          <mxGeometry x="-0.1143" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-44" target="4JHQIKAfzCPAmPfKTR0K-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-50" value="Не успешно" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-49">
          <mxGeometry x="-0.141" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-44" value="При регистрации или авторизации" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="560" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-45" value="Закидываем токен и username в sharedpref и выставляем в textview для username то, что лежит в username edittext (тут бы тоже что-то более надежное выставлять в username textview или сохранять username из username edittext в переменную при отправке запроса на сервер)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="640" width="270" height="130" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-48" value="Ничего не делаем" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1181" y="675" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-51" value="&lt;div&gt;В идеале что хотим:&lt;/div&gt;&lt;div&gt;1. Если есть валидный токен, то тоже самое, что в MainScreen и показать ProfileUI&lt;/div&gt;&lt;div&gt;2. Если валидного токена нет, то показать RegisterAuthorizationUI&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3. При успешной регистрации показать ProfileUI и выставить правильный username&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;4. При не успешной, как-то об этом сигнализировать&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="598" y="50" width="372" height="155" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-52" target="4JHQIKAfzCPAmPfKTR0K-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-52" value="Достаем пришедшие params" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1948" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-55" value="Одновременно" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1830" y="125" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-64" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-56" target="4JHQIKAfzCPAmPfKTR0K-62">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-56" value="Достаем username из sharedpref" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2130" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-57" target="4JHQIKAfzCPAmPfKTR0K-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-57" value="Запрашиваем данные об оппонентах с сервера" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2290" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-58" value="Перекладываем их в локальную переменную" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1948" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-60" value="Создаем и заполянем adapter для recyclerview" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2290" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-62" target="4JHQIKAfzCPAmPfKTR0K-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-62" value="Перекладываем username в локальную переменную" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2130" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-65" value="Если в params задано, то открываем сокет" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2130" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-67" target="4JHQIKAfzCPAmPfKTR0K-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-67" value="StartGameSocketMessage" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1923" y="425" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-68" value="Сообщения от сокета" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1810" y="440" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-69" value="Загружаем GameScreen" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1948" y="545" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-71" target="4JHQIKAfzCPAmPfKTR0K-72">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-74" value="Если уже заполнили recyclerview" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-73">
          <mxGeometry x="-0.1273" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-71" value="UserAvailableSocketMessage" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2180" y="430" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-72" value="Обновляем данные об оппоненте" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2215" y="545" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-75" value="В идеале что хотим:&lt;br&gt;&lt;div&gt;1. Возможно не делать столько действий одновременно. Для удобства можно выстроить примерно такую цепочку: Params -&amp;gt; OpponentsData -&amp;gt; Username -&amp;gt; CreateSocket&lt;/div&gt;&lt;div&gt;В такой картине, мы на каждом этапе можем быть уверены, что у нас есть все необходимое для следующего этапа&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Для CreateSocket нужно, OpponentsData и Username и Params&lt;/div&gt;&lt;div&gt;потому что может прийти сообщение (и придет обязательно, потому что сообщение о том, что мы сами в сети энивей приходит, причем сразу же) о смене состояния доступности пользователя UserAvailableSocketMessage и для него нужно OpponentsData&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Еще надо понять, когда мы хотим разрывать сокет (при закрытии приложения он сам по себе закрывается, это тоже проблема, но можно на сервере хранить какие-то данные о неоконченных партиях и если человек подключается к сокету заново и у него есть незаконченная партия, то кидать его туда) и как его переоткрывать&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1430" y="-120" width="610" height="220" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-76" value="&lt;div&gt;В идеале что хотим:&lt;/div&gt;&lt;div&gt;1. Выпрямить логику пайплайна игры. Как-то это сделать по проще, чтобы она не была размазана по всему файлу и по куче разных функций и не дай бог по разным файлам. Возможно, поскольку там регулярно надо обращаться к сокету, перенести ее во viewModel&lt;/div&gt;&lt;div&gt;2. Переведелать андроид на tryDoMoveV2 с мувами вместо пар позишионов&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2630" y="-5" width="360" height="140" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-77" value="Примерный ожидаемый пайпалайн игры" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2970" y="150" width="290" height="45" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-83" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-78" target="4JHQIKAfzCPAmPfKTR0K-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-78" value="Начало игры (тут выставление фигур на нужные места, соединения со всеми сокетами, хотя все соединения уже должны были произойти)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2952.5" y="210" width="325" height="110" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-79" target="4JHQIKAfzCPAmPfKTR0K-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-82" value="Нажатие на фигуру" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-81">
          <mxGeometry x="-0.2444" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-79" target="4JHQIKAfzCPAmPfKTR0K-84">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-86" value="Нажатие на клетку пути" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-85">
          <mxGeometry x="-0.2585" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-79" value="Нажатие на поле" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3055" y="380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-80" target="4JHQIKAfzCPAmPfKTR0K-87">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2920" y="1150" />
              <mxPoint x="3090" y="1150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-80" value="Запросили из ядра возможные ходы для фигуры и отрисовали их" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="2860" y="500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-109" target="4JHQIKAfzCPAmPfKTR0K-93">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-96" value="Превращение пешки" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-95">
          <mxGeometry x="-0.2138" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-109" target="4JHQIKAfzCPAmPfKTR0K-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-101" value="Конец игры" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-100">
          <mxGeometry x="-0.202" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-84" target="4JHQIKAfzCPAmPfKTR0K-109">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-84" value="Передвинули фигуру локально" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3270" y="500" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-87" target="4JHQIKAfzCPAmPfKTR0K-118">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-87" value="Отправили ход в либу" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3016.25" y="1200" width="147.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-93" target="4JHQIKAfzCPAmPfKTR0K-97">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-93" value="Отрисовали выбор фигуры, в которую первращаться" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3030" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-97" target="4JHQIKAfzCPAmPfKTR0K-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-97" value="&lt;div&gt;Превратились&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3030" y="805" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-102" target="4JHQIKAfzCPAmPfKTR0K-104">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-102" value="Отрисовали результат игры" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3530" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-104" value="Отправили данные об окончании игры на сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3530" y="810" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-106">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3090" y="1200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-106" value="Отослали данные на сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3030" y="915" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-108" target="4JHQIKAfzCPAmPfKTR0K-87">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3345" y="1150" />
              <mxPoint x="3090" y="1150" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-117" value="Ожидание хода оппонента (данных с сервера)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-116">
          <mxGeometry x="0.9101" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-108" value="Отправили данные на сервер" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3285" y="750" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-109" target="4JHQIKAfzCPAmPfKTR0K-108">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-113" value="Обычный ход" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-112">
          <mxGeometry x="-0.2222" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-109" value="Заблокировали поле" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3285" y="600" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-118" target="4JHQIKAfzCPAmPfKTR0K-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-123" value="Не конец игры" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-121">
          <mxGeometry x="-0.25" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-118" target="4JHQIKAfzCPAmPfKTR0K-125">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-128" value="Конец игры" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="4JHQIKAfzCPAmPfKTR0K-127">
          <mxGeometry x="-0.408" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-118" value="Перерисовали поле" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3030" y="1310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-120" target="4JHQIKAfzCPAmPfKTR0K-79">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="3090" y="1490" />
              <mxPoint x="2820" y="1490" />
              <mxPoint x="2820" y="360" />
              <mxPoint x="3115" y="360" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-120" value="Разблокировали поле" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3030" y="1410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4JHQIKAfzCPAmPfKTR0K-125" target="4JHQIKAfzCPAmPfKTR0K-126">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-125" value="Отрисовали результат игры" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3260" y="1420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="4JHQIKAfzCPAmPfKTR0K-126" value="Отправили данные об окончании игры на сервер (вот тут можно и не отправлять результат на сервер строго говоря)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3195" y="1530" width="250" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
